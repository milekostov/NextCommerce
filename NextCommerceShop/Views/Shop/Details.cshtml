@model NextCommerceShop.Models.Product

@{
    ViewData["Title"] = Model.Name;
}

<h1 class="mb-4">@Model.Name</h1>

<div class="row">
    <div class="col-md-6">

        @* Large product image (portrait-friendly wrapper) *@
        @if (!string.IsNullOrEmpty(Model.ImageUrl))
        {
            <div class="position-relative d-inline-block">
                @* BADGES *@
                @if (Model.StockQuantity == 0)
                {
                    <span class="product-badge badge-out">OUT OF STOCK</span>
                }
                else if (Model.StockQuantity <= 5)
                {
                    <span class="product-badge badge-low">LOW STOCK</span>
                }

                <div class="product-image-wrapper">
                    <img src="@Model.ImageUrl" class="img-fluid product-image rounded" alt="@Model.Name" />
                </div>
            </div>
        }
        else
        {
            <div class="product-image-wrapper">
                <img src="https://via.placeholder.com/400x600?text=No+Image"
                     class="img-fluid product-image shadow-sm rounded mb-3"
                     alt="No image available" />
            </div>
        }

    </div>

    <div class="col-md-6">
        <h3 class="text-muted">@Model.Category?.Name</h3>

        <p class="lead mt-3">
            @Model.Description
        </p>

        <h2 class="fw-bold mt-4">
            @Model.Price.ToString("0.00") €
        </h2>

        <p class="text-muted mb-4">
            In stock: @Model.StockQuantity
        </p>

        <form method="post" asp-controller="Cart" asp-action="Add">
            <input type="hidden" name="productId" value="@Model.Id" />
            <button type="submit" class="btn btn-primary" @(Model.StockQuantity == 0 ? "disabled" : "")>
                Add to cart
            </button>
        </form>

        <a asp-controller="Shop" asp-action="Index" class="btn btn-outline-secondary mt-3">
            Back to Shop
        </a>
    </div>
</div>
